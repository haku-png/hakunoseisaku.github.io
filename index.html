<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <!-- スマホでのズーム無効化（ピンチ・ダブルタップ等） -->
  <script>
    // ピンチズーム・ダブルタップズームを無効化
    document.addEventListener('touchstart', function (event) {
      if (event.touches.length > 1) {
        event.preventDefault();
      }
    }, { passive: false });

    let lastTouchEnd = 0;
    document.addEventListener('touchend', function (event) {
      const now = new Date().getTime();
      if (now - lastTouchEnd <= 350) {
        event.preventDefault();
      }
      lastTouchEnd = now;
    }, false);
  </script>
  <title>登山入門ゲーム</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- 縦画面警告オーバーレイ -->
  <div id="orientation-warning" class="hidden">
    <div class="orientation-warning-text">
      横画面での操作を<br>推奨します
    </div>
  </div>

  <!-- 画面全体（背景拡張用） -->
  <div id="screen-root">

    <!-- UI固定領域（9:16） -->
    <div id="ui-frame">

      <!-- 登山条件コンテナ -->
      <div id="condition-container" class="hidden">
        <!-- 左上：登山条件表示 -->
        <div id="condition-area">
          <!-- JSで自動生成 -->
        </div>
        
        <!-- 登山条件再抽選ボタン -->
        <button id="btn-reroll-condition">計画を練り直す</button>
        
        <!-- カスタムボタン -->
        <button id="btn-custom-condition">カスタム</button>
      </div>

      <!-- カスタム条件選択画面 -->
      <div id="scene-custom-condition" class="scene hidden">
        <h2>登山条件をカスタム</h2>
        
        <div class="custom-section">
          <h3>標高</h3>
          <div class="custom-options" id="custom-altitude"></div>
        </div>
        
        <div class="custom-section">
          <h3>天気</h3>
          <div class="custom-options" id="custom-weather"></div>
        </div>
        
        <div class="custom-section">
          <h3>季節</h3>
          <div class="custom-options" id="custom-season"></div>
        </div>
        
        <div class="custom-section">
          <h3>風</h3>
          <div class="custom-options" id="custom-wind"></div>
        </div>
        
        <div class="custom-section">
          <h3>状態</h3>
          <div class="custom-options" id="custom-state"></div>
        </div>
        
        <div class="custom-section">
          <h3>山行</h3>
          <div class="custom-options" id="custom-plan"></div>
        </div>
        
        <button id="btn-start-packing">パッキング開始</button>
        <button id="btn-cancel-custom">キャンセル</button>
      </div>

      <!-- 中央：メインコンテンツ -->
      <div id="main-area">

        <!-- メニュー画面 -->
        <div class="scene" id="scene-menu">
          <div class="menu-left">
            <div class="menu-title-area">
              <h1 class="menu-title-line1">登山学習</h1>
              <h1 class="menu-title-line2">ゲーム</h1>
            </div>
            <div class="menu-buttons-area">
              <button id="btn-quiz" data-next="quiz">知識クイズ</button>
              <button id="btn-packing" data-next="packing">パッキング</button>
              <button id="btn-shopping" data-next="shopping">買い物　　</button>
            </div>
          </div>
          <div class="menu-right">
            <img id="menu-main-image" src="" alt="メイン画像">
          </div>
        </div>

        <!-- クイズ画面 -->
        <div class="scene hidden" id="scene-quiz">
          <button id="btn-quiz-back-menu" class="quiz-back-button">
            メニューに戻る
          </button>

          <div id="quiz-main-area">
            <div id="quiz-illust-area">
              <!-- イラスト画像はここに挿入予定 -->
            </div>
            <div id="quiz-content-area">
              <div id="quiz-question-area">
                <div id="quiz-question"></div>
              </div>
              <div id="quiz-choices-area">
                <div class="quiz-choice" data-index="0"></div>
                <div class="quiz-choice" data-index="1"></div>
                <div class="quiz-choice" data-index="2"></div>
              </div>
            </div>
          </div>

          <div id="quiz-result" class="hidden"></div>
          <div id="quiz-explanation" class="hidden"></div>

          <div id="footer-area"></div>
        </div>

       <!-- パッキング画面 -->
<div class="scene hidden" id="scene-packing">
  <div id="packing-ui">

    <!-- パズル枠 -->
    <div id="pack-area">
      <div id="packing-header">
        <button id="btn-compress">
          <img src="img/compression.png" alt="圧縮" id="compress-icon">
        </button>
      </div>
      <div id="pack-grid"></div>
    </div>

    <!-- 容量選択UI -->
    <div id="capacity-selector">
      <button data-capacity="20">20</button>
      <button data-capacity="30">30</button>
      <button data-capacity="40">40</button>
      <button data-capacity="50">50</button>
      <button data-capacity="60">60</button>
      <button data-capacity="80">80</button>
    </div>

    <div id="packing-info">
      <span>現在重量:</span>
      <span id="packing-weight">0.0kg</span>
    </div>

    <!-- 装備チェックリスト -->
    <div id="equipment-checklist" class="hidden"></div>

    <!-- 装備一覧（★中身はJSに任せる） -->
    <div id="packing-items"></div>

    <button id="btn-back-menu">メニューに戻る</button>
    <button id="btn-ready">準備完了</button>

  </div>
</div>

        <!-- 買い物ゲーム画面 -->
        <div class="scene hidden" id="scene-shopping">
          <div id="shopping-ui">

            <h2>山と季節の選択
            </h2>

            <div id="shopping-selectors">
              <div class="selector-group">
                <h3>季節を選択</h3>
                <div class="selector-buttons">
                  <button class="season-btn" data-season="spring">春<br>【3〜5月】</button>
                  <button class="season-btn" data-season="summer">夏<br>【6〜9月】</button>
                  <button class="season-btn" data-season="autumn">秋<br><span style="font-size: 0.85em;">【10〜11月】</span></button>
                </div>
              </div>

              <div class="selector-group">
                <h3>山を選択</h3>
                <div class="selector-buttons">
                  <button class="mountain-btn" data-mountain="taisetsu">大雪山旭岳<br>【北海道】</button>
                  <button class="mountain-btn" data-mountain="chokai">鳥海山<br>【秋田】</button>
                  <button class="mountain-btn" data-mountain="takao">高尾山<br>【東京】</button>
                  <button class="mountain-btn" data-mountain="fuji">富士山<br><span style="font-size: 0.85em;">【山梨/静岡】</span></button>
                  <button class="mountain-btn" data-mountain="rokko">六甲山<br>【兵庫】</button>
                  <button class="mountain-btn" data-mountain="daisen">伯耆大山<br>【鳥取】</button>
                  <button class="mountain-btn" data-mountain="aso">阿蘇山<br>【熊本】</button>
                </div>
              </div>

              <button id="btn-go-shopping">買い物へ</button>
            </div>

            <div id="shopping-legend">
              <div class="legend-item purchased-legend">購入済・・・1タップ</div>
              <div class="legend-item local-purchase-legend">現地購入・・・2タップ</div>
            </div>

            <div id="shopping-items"></div>

            <button id="btn-exit-shopping">メニューに戻る</button>

          </div>
        </div>

        <!-- パッキングリザルト画面 -->
        <div class="scene hidden" id="scene-packing-result">
          <h2>パッキング結果</h2>
          <div id="result-content">
            <!-- JavaScriptで結果を表示 -->
          </div>
        </div>

      </div>

      <!-- 右下：共通ボタンエリア -->
      <div id="footer-area">
        <!-- シーンごとに切り替え -->
      </div>

    </div>
  </div>

  <script src="main.js"></script>
</body>
</html>